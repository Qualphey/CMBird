{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///./src/xhr_async.js"],"names":["XHR","require","next_url","getParam","next_url_input","document","createElement","type","name","value","auth_form","getElementById","appendChild","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","signin_form","err_msg_field","addEventListener","e","preventDefault","formData","FormData","send_data","key","entries","response","post","err","innerHTML","localStorage","setItem","access_token","console","log","error","module","exports","get","params","Promise","resolve","encodeURIComponent","JSON","stringify","xhr","XMLHttpRequest","parse","responseText","open","send","undefined","setRequestHeader","onreadystatechange","readyState","status","json","param_str","getParamByName"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","\nconst XHR = require(\"./xhr_async\");\n\nvar next_url = getParam(\"next_url\");\nif (next_url) {\n  var next_url_input = document.createElement(\"input\");\n  next_url_input.type = \"hidden\";\n  next_url_input.name = \"next_url\";\n  next_url_input.value = next_url;\n\n  var auth_form = document.getElementById(\"auth_form\");\n  auth_form.appendChild(next_url_input);\n}\n\nfunction getParam(name, url) {\n  if (!url) url = window.location.href;\n  name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n  var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n      results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n\nlet signin_form = document.getElementById(\"auth_form\");\nlet err_msg_field = document.getElementById(\"err_msg_field\");\n\nsignin_form.addEventListener('submit', async function(e) {\n  e.preventDefault();\n  try {\n    let formData = new FormData(signin_form)\n    let send_data = {};\n    for (let [key, value] of formData.entries()) {\n      send_data[key] = value;\n    }\n    const response = await XHR.post(\"/admin-auth\", send_data);\n\n    if (response.err) {\n      err_msg_field.innerHTML = \"Neteisingai įvestas e-pašto adresas arba slaptažodis!\";\n    } else if (response.next_url) {\n      window.localStorage.setItem('access_token', response.access_token);\n      window.location.replace(response.next_url);\n    }\n    console.log(response);\n  } catch (e) {\n    console.error(e);\n  }\n});\n","'use strict'\n\nmodule.exports = class {\n  static async get(url, params) {\n    try {\n      return await new Promise(function (resolve) {\n        if (params) {\n          url += \"?data=\"+encodeURIComponent(JSON.stringify(params));\n        }\n\n        var xhr = new XMLHttpRequest();\n\n        xhr.addEventListener(\"load\", function() {\n          resolve(JSON.parse(this.responseText));\n        });\n        xhr.open(\"GET\", url);\n        xhr.send();\n      });\n    } catch(e) {\n      console.error(e);\n      return undefined;\n    }\n  }\n\n  static async post(url, params) {\n    try {\n      return await new Promise(function (resolve) {\n        if (params.formData) {\n          var xhr = new XMLHttpRequest();\n          xhr.open(\"POST\", url);\n        //  xhr.setRequestHeader(\"Content-Type\",\"multipart/form-data\");\n          xhr.send(params.formData);\n          xhr.addEventListener(\"load\", function() {\n            resolve(JSON.parse(xhr.responseText));\n          });\n          console.log(url);\n        } else {\n          var xhr = new XMLHttpRequest();\n          xhr.open(\"POST\", url, true);\n\n          //Send the proper header information along with the request\n          xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n          xhr.onreadystatechange = function() {//Call a function when the state changes.\n            if(xhr.readyState == 4 && xhr.status == 200) {\n              resolve(JSON.parse(xhr.responseText));\n            }\n          }\n\n          var json = JSON.stringify(params);\n          var param_str = 'data='+encodeURIComponent(json);\n          xhr.send(param_str);\n        }\n      });\n    } catch(e) {\n      console.error(e);\n      return undefined;\n    }\n  }\n\n  static getParamByName(name, url) {\n    if (!url) url = window.location.href;\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n        results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n  }\n}\n"],"sourceRoot":""}